<div class="form-container">
  
  <!-- Botão para expandir/ocultar a seção de pesquisa -->
  <button (click)="toggleExpansion()">
    {{ isExpanded ? '▲' : '▼' }}
  </button>

  <h2>Create Allergy</h2>

  <!-- Formulário visível apenas quando isExpanded for true -->
  <div *ngIf="isExpanded">

    <!-- Success or error message -->
    <div *ngIf="message" class="message"
      [class.success]="createdAllergy"
      [class.error]="!createdAllergy">
      <span [innerHTML]="message"></span>
    </div>

    <!-- Allergy Form (only shown before saving) -->
    <app-generic-form
      *ngIf="!createdAllergy"
      [fields]="fields"
      [formData]="allergy"
      [isUpdate]="isUpdate"
      (formSubmit)="onSubmit()"
    ></app-generic-form>

    <!-- Allergy Created Details (shown after save) -->
    <div *ngIf="createdAllergy" class="created-details">
      <h3>Allergy Details:</h3>
      <p><strong>Code:</strong> {{ createdAllergy.code }}</p>
      <p><strong>Designation:</strong> {{ createdAllergy.designation }}</p>
      <p><strong>Description:</strong> {{ createdAllergy.description }}</p>
      
      <!-- Close button to return to the form -->
      <button (click)="createNewAllergy()">Create New Allergy</button>
    </div>
  </div>
</div>
